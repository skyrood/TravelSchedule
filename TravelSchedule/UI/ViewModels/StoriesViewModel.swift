//
//  StoriesViewModel.swift
//  TravelSchedule
//
//  Created by Rodion Kim on 2025/09/07.
//

import SwiftUI

@Observable
final class StoriesViewModel {
    var stories: [Story] = []
    var currentIndex: Int = 0
    
    init() {
        loadMockStories()
    }
    
    private func loadMockStories() {
        stories = [
            Story(
                backgroundImage: Image(.storyImage1),
                title: "Невероятное утро в Киото, полное света и запаха свежего чая",
                description: "Проснулся до рассвета и вышел к храму Фусими Инари. Вокруг стояла тишина, над землёй стелился лёгкий туман, и первые лучи солнца золотили ряды тории. Было ощущение, что я попал в другой мир — спокойный, мудрый и вечный."
            ),
            Story(
                backgroundImage: Image(.storyImage2),
                title: "Любимая еда",
                description: "Иногда всё, что нужно для счастья — это простая тарелка пасты с сыром, каплей оливкового масла и парой листьев базилика. Еда, которая возвращает в детство и делает день чуточку светлее."
            ),
            Story(
                backgroundImage: Image(.storyImage3),
                title: "Вечер на крыше под неоном",
                description: "С крыши старого дома в Сибуе видно, как город живёт ночью. Люди бегут, огни мигают, а ты просто сидишь с чашкой горячего чая и слушаешь, как мир дышит под тобой."
            ),
            Story(
                backgroundImage: Image(.storyImage4),
                title: "Работа, которая вдохновляет и даёт почувствовать, что ты не зря стараешься",
                description: "Сегодня провёл презентацию для команды. Сначала казалось, что никто не слушает, но потом увидел глаза — живые, внимательные. И понял: бывает, достаточно одного взгляда, чтобы понять, что ты на своём месте."
            ),
            Story(
                backgroundImage: Image(.storyImage5),
                title: "Медленное утро с тишиной и кофе",
                description: "Без будильника, без спешки, без лишних мыслей. Просто окно, за которым светлеет, и чашка свежесваренного кофе в руках. Всё остальное подождёт."
            ),
            Story(
                backgroundImage: Image(.storyImage6),
                title: "Прогулка с собакой, которая превратилась в маленькое приключение",
                description: "Думал — просто выйдем на пять минут, а в итоге прошли почти три километра, обошли весь парк, нашли старую тропинку и пару новых запахов. Для неё это был лучший день."
            ),
            Story(
                backgroundImage: Image(.storyImage7),
                title: "Письмо себе, которое напомнило о важных вещах",
                description: "Иногда стоит остановиться и написать самому себе пару строк. Просто чтобы вспомнить, зачем всё это. Чтобы не забывать, что ты не машина, а человек, которому тоже нужно тепло."
            ),
            Story(
                backgroundImage: Image(.storyImage8),
                title: "Когда отключили интернет и началась настоящая жизнь",
                description: "Вышел на улицу без карты, просто чтобы пройтись. Зашёл в закоулки, в которых никогда не был, случайно нашёл отличную кофейню и поговорил с бариста о музыке. Всё это — без единого уведомления."
            ),
            Story(
                backgroundImage: Image(.storyImage9),
                title: "Плов в обычную среду",
                description: "После тяжёлого дня решил порадовать себя. Заказал плов у любимого узбека, добавил салат из помидоров, сел за стол и почувствовал, как внутри становится теплее. Еда как терапия."
            ),
            Story(
                backgroundImage: Image(.storyImage10),
                title: "День в горах с тишиной, ветром и настоящей усталостью",
                description: "Вышел на маршрут в 6 утра. К обеду поднялся на хребет, с которого открывался вид на долину. Там, на высоте, ты по-настоящему слышишь себя. И это — главное."
            ),
            Story(
                backgroundImage: Image(.storyImage11),
                title: "Музыка, которую ты давно не слышал, но узнал с первых нот",
                description: "Включил старый плейлист. Первая же песня — и я снова 20-летний студент, с рюкзаком, бегущий под дождём. Такие моменты возвращают память, эмоции, смысл."
            ),
            Story(
                backgroundImage: Image(.storyImage12),
                title: "Открытка от бабушки, которая пришла в самый нужный момент",
                description: "Было сложно, всё валилось из рук. А потом почтальон оставил в ящике открытку. «Береги себя, я горжусь тобой». Слёзы были тёплые и нужные."
            ),
            Story(
                backgroundImage: Image(.storyImage13),
                title: "Попытка разобраться в квантовой физике за вечер пятницы",
                description: "Подписался на курс, начал читать и вдруг понял: не так всё страшно, если не бояться задавать глупые вопросы. Каждый абзац — шаг в сторону чего-то нового."
            ),
            Story(
                backgroundImage: Image(.storyImage14),
                title: "Выходной в одиночестве, который стал перезагрузкой",
                description: "Без звонков, встреч и суеты. Просто прогулка, чай, любимый плед и немного музыки. Иногда лучшая компания — это ты сам."
            )
        ]
    }
    
    func markStoryAsViewed(at index: Int) {
        guard stories.indices.contains(index) else { return }
        stories[index].isViewed = true
    }
    
    func goToStory(at index: Int) {
        guard stories.indices.contains(index) else { return }
        currentIndex = index
    }
}
